Thank you for installing {{ .Chart.Name | upper }}, released at name: {{ .Release.Name }}.

Para saber mais sobre a aplicação, tente:

  $ helm status {{ .Release.Name }}  # informações sobre os pods e essa mensagem
  $ helm get {{ .Release.Name }}     # pega todas as informações do kubernetes

Essa aplicação possui um scheduler e {{ .Values.worker.replicas }} futures workers.

The RStudio server allows you to connect to a RStudio session from which you can carry out your parallel work. You can get there using the following:

{{- if contains "NodePort" .Values.scheduler.serviceType }}

Para acessar o RStudio via navegador (NodePort):

  NODE_NAME=$(kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ template "future.fullname" . }}-scheduler -o jsonpath='{.items[0].spec.nodeName}' 2>/dev/null || kubectl get pods -n {{ .Release.Namespace }} --no-headers | awk '/scheduler|future-scheduler/ {print $1" "$7; exit}' | awk '{print $2}')
  export RSTUDIO_SERVER_IP=$(kubectl get node "$NODE_NAME" -o jsonpath='{.status.addresses[?(@.type=="ExternalIP")].address}' 2>/dev/null || kubectl get node "$NODE_NAME" -o jsonpath='{.status.addresses[?(@.type=="InternalIP")].address}')
  export RSTUDIO_SERVER_PORT=$(kubectl get svc {{ template "future.fullname" . }}-scheduler -n {{ .Release.Namespace }} -o jsonpath='{.spec.ports[0].nodePort}')

{{- else if contains "LoadBalancer" .Values.scheduler.serviceType }}

  export RSTUDIO_SERVER_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ template "future.fullname" . }}-scheduler -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  export RSTUDIO_SERVER_PORT={{ .Values.scheduler.servicePort }}

{{- else if contains "ClusterIP"  .Values.scheduler.serviceType }}

  export RSTUDIO_SERVER_IP="127.0.0.1"
  export RSTUDIO_SERVER_PORT=8787
  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ template "future.fullname" . }}-scheduler $RSTUDIO_SERVER_PORT:{{ .Values.scheduler.servicePort }} &

{{- end }}

  ACESSE http://$RSTUDIO_SERVER_IP:$RSTUDIO_SERVER_PORT       -- RStudio server

{{- if contains "LoadBalancer" .Values.scheduler.serviceType }}

NOTE: It may take a few minutes for the LoadBalancer IP to be available. Until then, the commands above will not work for the LoadBalancer service type.
You can watch the status by running 'kubectl get svc --namespace {{ .Release.Namespace }} -w {{ template "future.fullname" . }}-scheduler'

{{- end }}

NOTE: It may take a few minutes for the URLs above to be available if EXTRA_R_PACKAGES is specified, 
because they are installed before their respective services start.

NOTE: The default username and password to login to the RStudio server are `rstudio` and  `future`. To change this password, refer to the RStudio password section in values.yaml, or in the README.md.
