Thank you for installing {{ .Chart.Name | upper }}, released at name: {{ .Release.Name }}.

Para saber mais sobre a aplicação, tente:

  $ helm status {{ .Release.Name }}  # informações sobre os pods e essa mensagem
  $ helm get {{ .Release.Name }}     # pega todas as informações do kubernetes

Essa aplicação possui um scheduler e {{ .Values.worker.replicas }} futures workers.

O servidor RStudio permite que você se conecte a uma sessão do RStudio a partir da qual pode realizar seu trabalho em paralelo. Você pode acessá-lo usando o seguinte:

{{- if contains "NodePort" .Values.scheduler.serviceType }}

  export RSTUDIO_SERVER_IP=$(kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="ExternalIP")].address}' 2>/dev/null || kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="InternalIP")].address}' 2>/dev/null || echo 127.0.0.1)  
  export RSTUDIO_SERVER_PORT=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ template "future.fullname" . }}-scheduler -o jsonpath='{.spec.ports[0].nodePort}')

{{- else if contains "LoadBalancer" .Values.scheduler.serviceType }}

  export RSTUDIO_SERVER_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ template "future.fullname" . }}-scheduler -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  export RSTUDIO_SERVER_PORT={{ .Values.scheduler.servicePort }}

{{- else if contains "ClusterIP"  .Values.scheduler.serviceType }}

  export RSTUDIO_SERVER_IP="127.0.0.1"
  export RSTUDIO_SERVER_PORT=8787
  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ template "future.fullname" . }}-scheduler $RSTUDIO_SERVER_PORT:{{ .Values.scheduler.servicePort }} &

{{- end }}

  echo "ACESSE http://$RSTUDIO_SERVER_IP:$RSTUDIO_SERVER_PORT"       -- RStudio server

{{- if contains "LoadBalancer" .Values.scheduler.serviceType }}

OBS: Pode levar alguns minutos para que o IP do LoadBalancer fique disponível. Até lá, os comandos acima não funcionarão para o tipo de serviço LoadBalancer.
Você pode acompanhar o status executando kubectl get svc --namespace {{ .Release.Namespace }} -w {{ template "future.fullname" . }}-scheduler

{{- end }}

OBS: Pode levar alguns minutos para que as URLs acima fiquem disponíveis se EXTRA_R_PACKAGES estiver especificado, pois eles são instalados antes que os respectivos serviços sejam iniciados.

OBS: O nome de usuário e a senha padrão para entrar no servidor RStudio são, respectivamente, rstudio e future. Para alterar essa senha, consulte a seção de senha do RStudio em values.yaml ou o README.md.